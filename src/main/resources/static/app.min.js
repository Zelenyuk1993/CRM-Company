var app=angular.module("ERP",["ngMaterial","ui.router","ngMdIcons"]);app.config(["$stateProvider","$urlRouterProvider",function(e,r){e.state("app",{"abstract":!0,url:"",controller:"HeaderController",templateUrl:"template/header.html"}).state("app.main",{url:"/",controller:"CompanyController",templateUrl:"template/company.html"}),e.state("error",{"abstract":!0,url:"/error",template:"<ui-view/>"}).state("error.404",{url:"^/404",templateUrl:"template/404.html"}),r.otherwise("/404")}]),app.controller("CompanyController",["$scope","serverService",function(e,r){function t(){r.getCompanies().then(function(r){e.companies=_.filter(r,function(e){return 0!=e.childrenCompanies.length?e.sum=_.sumBy(e.childrenCompanies,function(e){return e.profit}):e})})}e.test="Hello World!!!",t(),e.newCompany={id:null,name:"",profit:null,parentCompanies:null},e.save=function(){r.saveCompany(e.newCompany).then(function(){t()})}}]),app.controller("HeaderController",["$scope",function(e){}]),app.factory("serverService",["$http","$q",function(e,r){var t={companiesGET:"/api/companies",companyPOST:"/api/company"};return{getCompanies:function(){var n=r.defer();return e.get(t.companiesGET).then(function(e){n.resolve(e.data)}),n.promise},saveCompany:function(n){var o=r.defer();return e.post(t.companyPOST,n).then(function(e){o.resolve(e.data)}),o.promise}}}]);